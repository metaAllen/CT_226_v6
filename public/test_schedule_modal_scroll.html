<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>èª²è¡¨é¸æ“‡ Modal æ»¾å‹•æ¸¬è©¦</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #1a1a1a;
            color: #fff;
            padding-bottom: 120px;
        }
        .test-section {
            background: #2a2a2a;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }
        button {
            background: #00bcd4;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            margin: 5px;
            font-size: 16px;
        }
        button:hover {
            background: #00acc1;
        }
        .info {
            background: #1e3a5f;
            color: #64b5f6;
            padding: 15px;
            border-radius: 6px;
            margin: 10px 0;
            border-left: 4px solid #2196f3;
        }
        .success {
            background: #1b5e20;
            color: #81c784;
            padding: 15px;
            border-radius: 6px;
            margin: 10px 0;
            border-left: 4px solid #4caf50;
        }
        .warning {
            background: #3e2723;
            color: #ffb74d;
            padding: 15px;
            border-radius: 6px;
            margin: 10px 0;
            border-left: 4px solid #ff9800;
        }
        
        /* æ¨¡æ“¬å°èˆªåˆ— */
        .mock-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            height: 70px;
            background: #1a1a1a;
            border-top: 1px solid #333;
            display: flex;
            justify-content: space-around;
            align-items: center;
            z-index: 2000;
        }
        .mock-nav-item {
            color: #666;
            text-align: center;
            font-size: 12px;
        }
        
        /* æ‰‹æ©Ÿç«¯èª²è¡¨ Modal å„ªåŒ– */
        @media (max-width: 500px) {
            /* æ‰‹æ©Ÿç«¯èª²è¡¨ Modal å„ªåŒ– */
            #scheduleModal {
                padding-top: 2vh !important;
                padding-bottom: 2vh !important;
            }
            
            #scheduleModal > div {
                max-width: 98vw !important;
                max-height: 92vh !important;
                margin: 0 1vw 2vh 1vw !important;
            }
            
            /* æ‰‹æ©Ÿç«¯å…§å®¹å€åŸŸå„ªåŒ– */
            #scheduleModal .scrollable-content,
            #scheduleModal > div > div:nth-child(2) {
                max-height: calc(92vh - 180px) !important;
            }
            
            /* æ‰‹æ©Ÿç«¯æŒ‰éˆ•å„ªåŒ– */
            #scheduleModal button {
                padding: 14px 18px !important;
                font-size: 16px !important;
                min-width: 100px !important;
                font-weight: 600 !important;
            }
            
            /* æ‰‹æ©Ÿç«¯è¼¸å…¥æ¡†å„ªåŒ– */
            #scheduleModal select {
                padding: 14px 12px !important;
                font-size: 16px !important;
                border-radius: 10px !important;
            }
            
            /* æ‰‹æ©Ÿç«¯æ¨™ç±¤å„ªåŒ– */
            #scheduleModal label {
                font-size: 16px !important;
                margin-bottom: 10px !important;
            }
            
            /* æ‰‹æ©Ÿç«¯è¡¨å–®é–“è·å„ªåŒ– */
            #scheduleForm {
                gap: 22px !important;
                padding: 22px 18px !important;
            }
            
            /* æ‰‹æ©Ÿç«¯ç­‰ç´šä»‹ç´¹å€åŸŸå„ªåŒ– */
            #levelIntro {
                min-height: 70px !important;
                padding: 14px !important;
                font-size: 14px !important;
                margin-bottom: 18px !important;
            }
        }
    </style>
</head>
<body>
    <h1>èª²è¡¨é¸æ“‡ Modal æ»¾å‹•æ¸¬è©¦</h1>
    
    <div class="test-section">
        <h2>æ¸¬è©¦èªªæ˜</h2>
        <div class="info">
            <strong>æ”¹é€²å…§å®¹ï¼š</strong>
            <ul>
                <li>âœ… æ·»åŠ ä¸‹æ‹‰æ»¾å‹•åŠŸèƒ½ï¼Œå…§å®¹å€åŸŸå¯æ»¾å‹•</li>
                <li>âœ… èª¿æ•´ Modal ä½ç½®ï¼Œé¿å…è¢«å°èˆªåˆ—é®æ“‹</li>
                <li>âœ… ä¿æŒèˆ‡ç¾æœ‰é¢¨æ ¼ä¸€è‡´çš„è¨­è¨ˆ</li>
                <li>âœ… å›ºå®šæŒ‰éˆ•å€åŸŸåœ¨åº•éƒ¨ï¼Œå§‹çµ‚å¯è¦‹</li>
                <li>âœ… å„ªåŒ–æ‰‹æ©Ÿç«¯é¡¯ç¤ºæ•ˆæœ</li>
            </ul>
        </div>
        <div class="success">
            <strong>é æœŸæ•ˆæœï¼š</strong>
            <ul>
                <li>Modal å¾é ‚éƒ¨ 3vh é–‹å§‹é¡¯ç¤ºï¼Œä¸æœƒè¢«å°èˆªåˆ—é®æ“‹</li>
                <li>å…§å®¹å€åŸŸå¯ä»¥æ»¾å‹•ï¼Œé©æ‡‰ä¸åŒè¢å¹•é«˜åº¦</li>
                <li>æŒ‰éˆ•å›ºå®šåœ¨åº•éƒ¨ï¼Œå§‹çµ‚å¯è¦‹</li>
                <li>ç­‰ç´šä»‹ç´¹å€åŸŸæœ‰è¶³å¤ ç©ºé–“é¡¯ç¤ºå…§å®¹</li>
            </ul>
        </div>
        <div class="warning">
            <strong>æ³¨æ„ï¼š</strong>åœ¨æ‰‹æ©Ÿä¸Šæ¸¬è©¦æ™‚ï¼Œè«‹æ³¨æ„è™›æ“¬éµç›¤å½ˆå‡ºæ™‚çš„è¡¨ç¾ã€‚
        </div>
    </div>

    <div class="test-section">
        <h2>åŠŸèƒ½æ¸¬è©¦</h2>
        <button onclick="testScheduleModal()">æ‰“é–‹èª²è¡¨é¸æ“‡ Modal</button>
        <button onclick="showDeviceInfo()">é¡¯ç¤ºè¨­å‚™ä¿¡æ¯</button>
        <button onclick="addTestContent()">æ·»åŠ æ¸¬è©¦å…§å®¹ï¼ˆæ¨¡æ“¬é•·å…§å®¹ï¼‰</button>
    </div>

    <div class="test-section">
        <h2>è¨­å‚™ä¿¡æ¯</h2>
        <div id="deviceInfo">é»æ“Šä¸Šæ–¹æŒ‰éˆ•é¡¯ç¤ºè¨­å‚™ä¿¡æ¯</div>
    </div>

    <!-- èª²è¡¨é¸æ“‡ Modal -->
    <div id="scheduleModal" style="display:none;position:fixed;top:0;left:0;width:100vw;height:100vh;background:rgba(0,0,0,0.4);z-index:3000;justify-content:center;align-items:flex-start;padding-top:3vh;transition:opacity 0.2s;opacity:0;overflow-y:auto;">
        <div style="background:#23272f;border-radius:20px;min-width:280px;max-width:95vw;max-height:90vh;box-shadow:0 6px 32px rgba(0,188,212,0.10);display:flex;flex-direction:column;margin:0 auto 3vh auto;position:relative;">
            <!-- æ¨™é¡Œå€åŸŸ -->
            <div style="padding:24px 22px 16px 22px;border-bottom:1px solid rgba(255,255,255,0.1);flex-shrink:0;">
                <h3 style="color:#00bcd4;margin:0;font-size:18px;text-align:center;">é¸æ“‡èª²è¡¨</h3>
                <div id="scheduleError" style="color:#ff5252;font-size:14px;min-height:16px;margin-top:8px;text-align:center;"></div>
            </div>
            
            <!-- å¯æ»¾å‹•å…§å®¹å€åŸŸ -->
            <div style="flex:1;overflow-y:auto;padding:0;max-height:calc(90vh - 160px);">
                <form id="scheduleForm" style="display:flex;flex-direction:column;gap:20px;padding:20px 22px;">
                    <div>
                        <label for="modalScheduleTypeSelect" style="color:#b0bec5;font-size:15px;display:block;margin-bottom:8px;">é¸æ“‡èª²è¡¨</label>
                        <select id="modalScheduleTypeSelect" style="width:100%;padding:12px;border-radius:10px;border:1px solid #444;background:#181c22;color:#fff;font-size:16px;box-sizing:border-box;">
                            <option value="">è«‹é¸æ“‡èª²è¡¨</option>
                            <option value="Challenge Taiwan">Challenge Taiwan</option>
                            <option value="Ironman">Ironman</option>
                            <option value="LAVA å®Œè³½æ¨‚åœ’">LAVA å®Œè³½æ¨‚åœ’</option>
                        </select>
                    </div>
                    
                    <div>
                        <label for="modalDistanceSelect" style="color:#b0bec5;font-size:15px;display:block;margin-bottom:8px;">é¸æ“‡è·é›¢</label>
                        <select id="modalDistanceSelect" style="width:100%;padding:12px;border-radius:10px;border:1px solid #444;background:#181c22;color:#fff;font-size:16px;box-sizing:border-box;">
                            <option value="">è«‹é¸æ“‡è·é›¢</option>
                            <option value="113">113</option>
                            <option value="226">226</option>
                        </select>
                    </div>
                    
                    <div>
                        <label for="modalLevelSelect" style="color:#b0bec5;font-size:15px;display:block;margin-bottom:8px;">èª²è¡¨ç­‰ç´š</label>
                        <select id="modalLevelSelect" style="width:100%;padding:12px;border-radius:10px;border:1px solid #444;background:#181c22;color:#fff;font-size:16px;box-sizing:border-box;">
                            <option value="">è«‹é¸æ“‡ç­‰ç´š</option>
                            <option value="è»Ÿè…³è¦">è»Ÿè…³è¦</option>
                            <option value="æ»‘æ°´é´¨">æ»‘æ°´é´¨</option>
                            <option value="è€é³¥">è€é³¥</option>
                        </select>
                    </div>
                    
                    <!-- ç­‰ç´šä»‹ç´¹å€åŸŸ -->
                    <div id="levelIntro" style="min-height:80px;padding:16px;background:#181c22;border-radius:10px;color:#b0bec5;font-size:14px;line-height:1.5;border:1px solid #444;margin-bottom:20px;">
                        é¸æ“‡ç­‰ç´šå¾Œæœƒé¡¯ç¤ºè©³ç´°èªªæ˜
                    </div>
                    
                    <!-- é¡å¤–æ¸¬è©¦å…§å®¹å€åŸŸ -->
                    <div id="testContent"></div>
                </form>
            </div>
            
            <!-- å›ºå®šæŒ‰éˆ•å€åŸŸ -->
            <div style="padding:16px 22px 20px 22px;border-top:1px solid rgba(255,255,255,0.1);background:#23272f;border-radius:0 0 20px 20px;flex-shrink:0;">
                <div style="display:flex;gap:12px;justify-content:center;">
                    <button type="button" onclick="closeScheduleModal()" style="background:#666;color:#fff;border:none;padding:12px 20px;border-radius:10px;font-size:16px;min-width:90px;cursor:pointer;transition:background 0.3s;">å–æ¶ˆ</button>
                    <button type="submit" onclick="saveSchedule()" style="background:linear-gradient(90deg, #12214e 0%, #078282 100%);color:#fff;border:none;padding:12px 20px;border-radius:10px;font-size:16px;min-width:90px;cursor:pointer;transition:transform 0.2s;box-shadow:0 2px 8px rgba(0,188,212,0.3);">å„²å­˜</button>
                </div>
            </div>
        </div>
    </div>

    <!-- æ¨¡æ“¬å°èˆªåˆ— -->
    <div class="mock-nav">
        <div class="mock-nav-item">ä¸»é </div>
        <div class="mock-nav-item">çµ±è¨ˆ</div>
        <div class="mock-nav-item">èŠå¤©</div>
        <div class="mock-nav-item">æ—¥æ›†</div>
        <div class="mock-nav-item">æœƒå“¡</div>
    </div>

    <script>
        // ç­‰ç´šä»‹ç´¹å°æ‡‰è¡¨
        const levelIntroMap = {
            'è»Ÿè…³è¦': `ğŸ¦ è»Ÿè…³è¦<br/>
                æœƒåšå¤¢ï¼ŒæœƒæœŸå¾…ï¼Œä¸‹æ°´é‚„æ˜¯æ€•å—†åˆ°å£é¼»æœ‰ææ‡¼æ„Ÿï¼Œä½†åœ¨æ›æ°£æŠ€è¡“æ²’å¥½åˆ°çœŸæ­£å­¸æœƒæ¸¸æ³³ï¼Œå¤§æ¦‚åªæœƒè›™å¼ï¼Œå¤ªå†·ä¹Ÿçˆ†ï¼Œå‰›ç·´ä¹Ÿçˆ†ã€‚<br/><br/>
                é©åˆåˆå­¸è€…ï¼Œå¾åŸºç¤é–‹å§‹å»ºç«‹ä¿¡å¿ƒå’ŒæŠ€å·§ã€‚`,
            'æ»‘æ°´é´¨': `ğŸ¦† æ»‘æ°´é´¨<br/>
                æ¸¸æ°´é †ï¼ŒæœƒæœŸå¾…ï¼Œä½†åœ¨é•·è·é›¢æˆ–é«˜å¼·åº¦è¨“ç·´æ™‚é‚„æ˜¯æœƒæœ‰æŒ‘æˆ°ã€‚å·²ç¶“æŒæ¡åŸºæœ¬æŠ€å·§ï¼Œä½†éœ€è¦æ›´å¤šç·´ç¿’ä¾†æå‡è€åŠ›ã€‚<br/><br/>
                é©åˆæœ‰ä¸€å®šåŸºç¤çš„ç·´ç¿’è€…ï¼Œå¯ä»¥å˜—è©¦æ›´å…·æŒ‘æˆ°æ€§çš„è¨“ç·´ã€‚`,
            'è€é³¥': `ğŸ¦… è€é³¥<br/>
                æ¸¸æ°´é †ï¼ŒæŠ€è¡“æˆç†Ÿï¼Œæœ‰è±å¯Œçš„è¨“ç·´å’Œæ¯”è³½ç¶“é©—ã€‚èƒ½å¤ æ‡‰å°å„ç¨®è¨“ç·´å¼·åº¦å’Œæ¯”è³½ç’°å¢ƒã€‚<br/><br/>
                é©åˆç¶“é©—è±å¯Œçš„é‹å‹•å“¡ï¼Œå¯ä»¥é€²è¡Œé«˜å¼·åº¦å’Œå°ˆæ¥­åŒ–çš„è¨“ç·´ã€‚`
        };

        // é¡¯ç¤ºè¨­å‚™ä¿¡æ¯
        function showDeviceInfo() {
            const deviceInfo = document.getElementById('deviceInfo');
            const info = `
                <p><strong>è¢å¹•å°ºå¯¸ï¼š</strong> ${window.screen.width} x ${window.screen.height}</p>
                <p><strong>è¦–çª—å°ºå¯¸ï¼š</strong> ${window.innerWidth} x ${window.innerHeight}</p>
                <p><strong>å¯ç”¨é«˜åº¦ï¼š</strong> ${window.innerHeight - 70} (æ‰£é™¤å°èˆªåˆ—)</p>
                <p><strong>è¨­å‚™åƒç´ æ¯”ï¼š</strong> ${window.devicePixelRatio}</p>
                <p><strong>æ˜¯å¦ç‚ºæ‰‹æ©Ÿï¼š</strong> ${/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) ? 'æ˜¯' : 'å¦'}</p>
                <p><strong>è§¸æ§æ”¯æ´ï¼š</strong> ${'ontouchstart' in window ? 'æ˜¯' : 'å¦'}</p>
                <p><strong>Modal æœ€å¤§é«˜åº¦ï¼š</strong> ${Math.floor(window.innerHeight * 0.9)}px (90vh)</p>
                <p><strong>å…§å®¹å€æœ€å¤§é«˜åº¦ï¼š</strong> ${Math.floor(window.innerHeight * 0.9) - 160}px (90vh - 160px)</p>
            `;
            deviceInfo.innerHTML = info;
        }

        // æ¸¬è©¦èª²è¡¨é¸æ“‡ Modal
        function testScheduleModal() {
            const modal = document.getElementById('scheduleModal');
            modal.style.display = 'flex';
            setTimeout(() => {
                modal.style.opacity = '1';
            }, 10);
        }

        // é—œé–‰èª²è¡¨é¸æ“‡ Modal
        function closeScheduleModal() {
            const modal = document.getElementById('scheduleModal');
            modal.style.opacity = '0';
            setTimeout(() => {
                modal.style.display = 'none';
            }, 200);
        }

        // å„²å­˜èª²è¡¨
        function saveSchedule() {
            const type = document.getElementById('modalScheduleTypeSelect').value;
            const distance = document.getElementById('modalDistanceSelect').value;
            const level = document.getElementById('modalLevelSelect').value;
            
            if (!type || !distance || !level) {
                document.getElementById('scheduleError').textContent = 'è«‹å¡«å¯«å®Œæ•´è³‡è¨Š';
                return;
            }
            
            alert(`èª²è¡¨å·²å„²å­˜ï¼š${type} ${distance} ${level}`);
            closeScheduleModal();
        }

        // æ·»åŠ æ¸¬è©¦å…§å®¹ï¼ˆæ¨¡æ“¬é•·å…§å®¹ï¼‰
        function addTestContent() {
            const testContent = document.getElementById('testContent');
            testContent.innerHTML = `
                <div style="padding:16px;background:#1a1a1a;border-radius:10px;color:#b0bec5;font-size:14px;line-height:1.5;border:1px solid #444;margin-bottom:20px;">
                    <h4 style="color:#00bcd4;margin-top:0;">é¡å¤–è¨“ç·´å»ºè­°</h4>
                    <p>1. æ¯é€±è‡³å°‘é€²è¡Œ 3-4 æ¬¡æœ‰æ°§è¨“ç·´</p>
                    <p>2. åŒ…å«æ¸¸æ³³ã€é¨è»Šã€è·‘æ­¥ä¸‰é …è¨“ç·´</p>
                    <p>3. æ³¨æ„ä¼‘æ¯å’Œæ¢å¾©æ™‚é–“</p>
                    <p>4. å®šæœŸæª¢æŸ¥è¨“ç·´é€²åº¦</p>
                    <p>5. ä¿æŒç‡Ÿé¤Šå‡è¡¡</p>
                    <p>6. å……è¶³çš„ç¡çœ æ™‚é–“</p>
                    <p>7. é©ç•¶çš„æ‹‰ä¼¸å’Œæ”¾é¬†</p>
                    <p>8. å®šæœŸé«”æª¢ç¢ºä¿èº«é«”å¥åº·</p>
                </div>
                <div style="padding:16px;background:#1a1a1a;border-radius:10px;color:#b0bec5;font-size:14px;line-height:1.5;border:1px solid #444;margin-bottom:20px;">
                    <h4 style="color:#00bcd4;margin-top:0;">æ¯”è³½æº–å‚™</h4>
                    <p>1. æå‰ 2-3 å€‹æœˆé–‹å§‹æº–å‚™</p>
                    <p>2. é€æ­¥å¢åŠ è¨“ç·´å¼·åº¦</p>
                    <p>3. æ¨¡æ“¬æ¯”è³½ç’°å¢ƒè¨“ç·´</p>
                    <p>4. æº–å‚™æ¯”è³½è£å‚™</p>
                    <p>5. åˆ¶å®šæ¯”è³½ç­–ç•¥</p>
                    <p>6. å¿ƒç†æº–å‚™å’Œèª¿é©</p>
                </div>
            `;
        }

        // é»æ“ŠèƒŒæ™¯é—œé–‰ Modal
        document.getElementById('scheduleModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeScheduleModal();
            }
        });

        // ç­‰ç´šé¸æ“‡äº‹ä»¶
        document.getElementById('modalLevelSelect').addEventListener('change', function() {
            const levelIntro = document.getElementById('levelIntro');
            const level = this.value;
            
            if (level && levelIntroMap[level]) {
                levelIntro.innerHTML = levelIntroMap[level];
            } else {
                levelIntro.innerHTML = 'é¸æ“‡ç­‰ç´šå¾Œæœƒé¡¯ç¤ºè©³ç´°èªªæ˜';
            }
        });

        // èª²è¡¨é¡å‹é¸æ“‡äº‹ä»¶
        document.getElementById('modalScheduleTypeSelect').addEventListener('change', function() {
            const distanceSelect = document.getElementById('modalDistanceSelect');
            const type = this.value;
            
            let options = '<option value="">è«‹é¸æ“‡è·é›¢</option>';
            if (type === 'Challenge Taiwan') {
                options += '<option value="113">113</option><option value="226">226</option>';
            } else if (type === 'Ironman') {
                options += '<option value="113">113</option>';
            } else if (type === 'LAVA å®Œè³½æ¨‚åœ’') {
                options += '<option value="113">113</option>';
            }
            
            distanceSelect.innerHTML = options;
        });

        // é é¢è¼‰å…¥æ™‚è‡ªå‹•é¡¯ç¤ºè¨­å‚™ä¿¡æ¯
        document.addEventListener('DOMContentLoaded', function() {
            showDeviceInfo();
            
            // ç›£è½è¦–çª—å¤§å°è®ŠåŒ–
            window.addEventListener('resize', function() {
                setTimeout(showDeviceInfo, 100);
            });
        });
    </script>
</body>
</html>
